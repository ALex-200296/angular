(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,n,e){"use strict";e.r(n),e.d(n,"AdminModule",function(){return X});var l=e("ofXK"),r=e("tyNb"),i=e("3Pt+"),o=e("fXoL"),a=e("+zHE");function s(t,n){if(1&t&&(o.Lb(0,"div",10),o.lc(1),o.Kb()),2&t){const t=n.ngIf;o.yb(1),o.nc(" ",t," ")}}function c(t,n){if(1&t&&(o.Lb(0,"div",11),o.lc(1),o.Kb()),2&t){const t=o.Ub();o.yb(1),o.nc(" ",t.message," ")}}function b(t,n){1&t&&(o.Lb(0,"small"),o.lc(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 email "),o.Kb())}function u(t,n){1&t&&(o.Lb(0,"small"),o.lc(1," \u041f\u043e\u043b\u0435 email \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c email "),o.Kb())}function d(t,n){if(1&t&&(o.Lb(0,"div",12),o.jc(1,b,2,0,"small",13),o.jc(2,u,2,0,"small",13),o.Kb()),2&t){const t=o.Ub();let n=null,e=null;o.yb(1),o.ac("ngIf",null==(n=t.form.get("email"))||null==n.errors?null:n.errors.required),o.yb(1),o.ac("ngIf",null==(e=t.form.get("email"))||null==e.errors?null:e.errors.email)}}function f(t,n){1&t&&(o.Lb(0,"small"),o.lc(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c "),o.Kb())}function m(t,n){if(1&t&&(o.Lb(0,"small"),o.lc(1),o.Kb()),2&t){const t=o.Ub(2);let n=null;o.yb(1),o.oc(" \u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ",null==(n=t.form.get("password"))||null==n.errors?null:n.errors.minlength.requiredLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u043d ",null==(n=t.form.get("password"))||null==n.errors?null:n.errors.minlength.actualLength," \u0441\u0438\u043c\u0432\u043e\u043b\u0430. ")}}function p(t,n){if(1&t&&(o.Lb(0,"div",12),o.jc(1,f,2,0,"small",13),o.jc(2,m,2,2,"small",13),o.Kb()),2&t){const t=o.Ub();let n=null,e=null;o.yb(1),o.ac("ngIf",null==(n=t.form.get("password"))||null==n.errors?null:n.errors.required),o.yb(1),o.ac("ngIf",null==(e=t.form.get("password"))||null==e.errors?null:e.errors.minlength)}}const h=function(t){return{invalid:t}};let g=(()=>{class t{constructor(t,n,e){this.auth=t,this.router=n,this.route=e,this.submitted=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{t.loginAgain?this.message="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":t.authFailed&&(this.message="\u0421\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043d\u043e\u0432\u043e")}),this.form=new i.d({email:new i.b("",[i.m.required,i.m.email]),password:new i.b("",[i.m.required,i.m.minLength(6)])})}submit(){this.form.invalid||(this.submitted=!0,this.auth.login({email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.form.reset(),this.router.navigate(["/admin","dashboard"]),this.submitted=!1},()=>{this.submitted=!1}))}}return t.\u0275fac=function(n){return new(n||t)(o.Ib(a.a),o.Ib(r.c),o.Ib(r.a))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-login-page"]],decls:18,vars:14,consts:[[1,"card",3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"form-control",3,"ngClass"],["for","email"],["id","email","type","email","formControlName","email"],["class","validation",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"],[1,"alert","alert-info"],[1,"validation"],[4,"ngIf"]],template:function(t,n){if(1&t&&(o.Lb(0,"form",0),o.Sb("ngSubmit",function(){return n.submit()}),o.Lb(1,"h2"),o.lc(2,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u043f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430"),o.Kb(),o.jc(3,s,2,1,"div",1),o.Vb(4,"async"),o.jc(5,c,2,1,"div",2),o.Lb(6,"div",3),o.Lb(7,"label",4),o.lc(8,"Email:"),o.Kb(),o.Jb(9,"input",5),o.jc(10,d,3,2,"div",6),o.Kb(),o.Lb(11,"div",3),o.Lb(12,"label",7),o.lc(13,"\u041f\u0430\u0440\u043e\u043b\u044c:"),o.Kb(),o.Jb(14,"input",8),o.jc(15,p,3,2,"div",6),o.Kb(),o.Lb(16,"button",9),o.lc(17," \u0412\u043e\u0439\u0442\u0438\n"),o.Kb(),o.Kb()),2&t){let t=null,e=null,l=null,r=null;o.ac("formGroup",n.form),o.yb(3),o.ac("ngIf",o.Wb(4,8,n.auth.error$)),o.yb(2),o.ac("ngIf",n.message),o.yb(1),o.ac("ngClass",o.cc(10,h,(null==(t=n.form.get("email"))?null:t.touched)&&(null==(t=n.form.get("email"))?null:t.invalid))),o.yb(4),o.ac("ngIf",(null==(e=n.form.get("email"))?null:e.touched)&&(null==(e=n.form.get("email"))?null:e.invalid)),o.yb(1),o.ac("ngClass",o.cc(12,h,(null==(l=n.form.get("password"))?null:l.touched)&&(null==(l=n.form.get("password"))?null:l.invalid))),o.yb(4),o.ac("ngIf",(null==(r=n.form.get("password"))?null:r.touched)&&(null==(r=n.form.get("password"))?null:r.invalid)),o.yb(1),o.ac("disabled",n.form.invalid||n.submitted)}},directives:[i.n,i.j,i.e,l.l,l.j,i.a,i.i,i.c],pipes:[l.b],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})();const v=function(){return["/admin","dashboard"]},L=function(){return["/admin/","create"]};function y(t,n){if(1&t){const t=o.Mb();o.Lb(0,"ul"),o.Lb(1,"li",4),o.Lb(2,"a",5),o.lc(3,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),o.Kb(),o.Kb(),o.Lb(4,"li",4),o.Lb(5,"a",5),o.lc(6,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),o.Kb(),o.Kb(),o.Lb(7,"li"),o.Lb(8,"a",6),o.Sb("click",function(n){return o.fc(t),o.Ub().logout(n)}),o.lc(9,"\u0412\u044b\u0439\u0442\u0438"),o.Kb(),o.Kb(),o.Kb()}2&t&&(o.yb(2),o.ac("routerLink",o.bc(2,v)),o.yb(3),o.ac("routerLink",o.bc(3,L)))}let K=(()=>{class t{constructor(t,n){this.router=t,this.auth=n}ngOnInit(){}logout(t){t.preventDefault(),this.auth.logout(),this.router.navigate(["/admin","login"])}}return t.\u0275fac=function(n){return new(n||t)(o.Ib(r.c),o.Ib(a.a))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-admin-layout"]],decls:7,vars:1,consts:[[1,"navbar","bg-primary"],["routerLink","/"],[4,"ngIf"],[1,"container"],["routerLinkActive","active"],[3,"routerLink"],["href","#",3,"click"]],template:function(t,n){1&t&&(o.Lb(0,"nav",0),o.Lb(1,"h1"),o.Lb(2,"a",1),o.lc(3,"Angular Admin"),o.Kb(),o.Kb(),o.jc(4,y,10,4,"ul",2),o.Kb(),o.Lb(5,"div",3),o.Jb(6,"router-outlet"),o.Kb()),2&t&&(o.yb(4),o.ac("ngIf",n.auth.isAuthenticated()))},directives:[r.f,l.l,r.h,r.e],encapsulation:2}),t})();var w=e("AytR"),I=e("lJxs"),j=e("tk/3");let C=(()=>{class t{constructor(t){this.http=t}create(t){return this.http.post(`${w.a.fbDbUrl}/posts.json`,t).pipe(Object(I.a)(n=>Object.assign(Object.assign({},t),{id:n.name,date:new Date(t.date)})))}getAll(){return this.http.get(`${w.a.fbDbUrl}/posts.json`).pipe(Object(I.a)(t=>Object.keys(t).map(n=>Object.assign(Object.assign({},t[n]),{id:n,date:new Date(t[n].date)}))))}remove(t){return this.http.delete(`${w.a.fbDbUrl}/posts${t}.json`)}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(j.b))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k=(()=>{class t{transform(t,n=""){return n.trim()?t.filter(t=>t.title.toLowerCase().includes(n.toLowerCase())):t}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=o.Hb({name:"searchPosts",type:t,pure:!0}),t})();const S=function(t){return["/admin","post",t,"edit"]};function O(t,n){if(1&t){const t=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.lc(2),o.Kb(),o.Lb(3,"td"),o.lc(4),o.Kb(),o.Lb(5,"td"),o.lc(6),o.Kb(),o.Lb(7,"td"),o.lc(8),o.Vb(9,"date"),o.Kb(),o.Lb(10,"td"),o.Lb(11,"button",5),o.lc(12," \u041e\u0442\u043a\u0440\u044b\u0442\u044c "),o.Kb(),o.Lb(13,"a",6),o.Sb("click",function(){o.fc(t);const e=n.$implicit;return o.Ub(2).remove(e.id)}),o.lc(14,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),o.Kb(),o.Kb(),o.Kb()}if(2&t){const t=n.$implicit,e=n.index;o.yb(2),o.mc(e+1),o.yb(2),o.mc(t.author),o.yb(2),o.mc(t.title),o.yb(2),o.mc(o.Xb(9,5,t.date,"medium")),o.yb(3),o.ac("routerLink",o.cc(8,S,t.id))}}function x(t,n){if(1&t){const t=o.Mb();o.Lb(0,"div"),o.Lb(1,"div",2),o.Lb(2,"input",3),o.Sb("ngModelChange",function(n){return o.fc(t),o.Ub().searchStr=n}),o.Kb(),o.Kb(),o.Lb(3,"table"),o.Lb(4,"thead"),o.Lb(5,"tr"),o.Lb(6,"th"),o.lc(7,"#"),o.Kb(),o.Lb(8,"th"),o.lc(9,"\u0410\u0432\u0442\u043e\u0440"),o.Kb(),o.Lb(10,"th"),o.lc(11,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),o.Kb(),o.Lb(12,"th"),o.lc(13,"\u0414\u0430\u0442\u0430"),o.Kb(),o.Lb(14,"th"),o.lc(15,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),o.Kb(),o.Kb(),o.Kb(),o.Lb(16,"tbody"),o.jc(17,O,15,10,"tr",4),o.Vb(18,"searchPosts"),o.Kb(),o.Kb(),o.Kb()}if(2&t){const t=o.Ub();o.yb(2),o.ac("ngModel",t.searchStr),o.yb(15),o.ac("ngForOf",o.Xb(18,2,t.posts,t.searchStr))}}function A(t,n){1&t&&(o.Lb(0,"p",7),o.lc(1,"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),o.Kb())}let q=(()=>{class t{constructor(t){this.postsService=t,this.posts=[],this.searchStr=""}ngOnInit(){this.pSub=this.postsService.getAll().subscribe(t=>{this.posts=t})}remove(t){this.dSub=this.postsService.remove(t).subscribe(()=>{this.posts=this.posts.filter(n=>n.id!==t)})}ngOnDestroy(){this.pSub&&this.pSub.unsubscribe(),this.dSub&&this.dSub.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(o.Ib(C))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-dashbord-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"form-control"],["type","text","placeholder","\u041d\u0430\u0439\u0442 \u043f\u043e\u0441\u0442",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"btn","btn-lnk","open",3,"routerLink"],[3,"click"],[1,"text-center"]],template:function(t,n){if(1&t&&(o.jc(0,x,19,5,"div",0),o.jc(1,A,2,0,"ng-template",null,1,o.kc)),2&t){const t=o.ec(2);o.ac("ngIf",n.posts.length)("ngIfElse",t)}},directives:[l.l,i.a,i.i,i.k,l.k,r.d],pipes:[k,l.e],styles:[".open[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();var U=e("CzEO");function M(t,n){1&t&&(o.Lb(0,"small"),o.lc(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430 "),o.Kb())}function P(t,n){if(1&t&&(o.Lb(0,"div",10),o.jc(1,M,2,0,"small",11),o.Kb()),2&t){const t=o.Ub();let n=null;o.yb(1),o.ac("ngIf",null==(n=t.form.get("title"))||null==n.errors?null:n.errors.required)}}function D(t,n){1&t&&(o.Lb(0,"small"),o.lc(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u043e\u0441\u0442\u0430 "),o.Kb())}function J(t,n){if(1&t&&(o.Lb(0,"div",10),o.jc(1,D,2,0,"small",11),o.Kb()),2&t){const t=o.Ub();let n=null;o.yb(1),o.ac("ngIf",null==(n=t.form.get("author"))||null==n.errors?null:n.errors.required)}}const E=function(t){return{invalid:t}};let N=(()=>{class t{constructor(t){this.postsService=t}ngOnInit(){this.form=new i.d({title:new i.b(null,[i.m.required]),text:new i.b(null,[i.m.required]),author:new i.b(null,[i.m.required])})}submit(){if(this.form.invalid)return;const t={title:this.form.value.title,author:this.form.value.author,text:this.form.value.text,date:new Date};this.postsService.create(t).subscribe(()=>{this.form.reset()}),console.log(t)}}return t.\u0275fac=function(n){return new(n||t)(o.Ib(C))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-create-page"]],decls:19,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"form-control",3,"ngClass"],["for","title"],["id","title","type","text","formControlName","title"],["class","validation",4,"ngIf"],[1,"form-control"],["formControlName","text"],["for","author"],["id","author","type","text","formControlName","author"],["type","submit",1,"btn","btn-block","btn-dark",3,"disabled"],[1,"validation"],[4,"ngIf"]],template:function(t,n){if(1&t&&(o.Lb(0,"form",0),o.Sb("ngSubmit",function(){return n.submit()}),o.Lb(1,"h1"),o.lc(2,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430"),o.Kb(),o.Lb(3,"div",1),o.Lb(4,"label",2),o.lc(5,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430:"),o.Kb(),o.Jb(6,"input",3),o.jc(7,P,2,1,"div",4),o.Kb(),o.Lb(8,"div",5),o.Lb(9,"label"),o.lc(10,"\u041a\u043e\u043d\u0442\u0435\u043d\u0442 \u043f\u043e\u0441\u0442\u0430:"),o.Kb(),o.Jb(11,"quill-editor",6),o.Kb(),o.Lb(12,"div",1),o.Lb(13,"label",7),o.lc(14,"\u0410\u0432\u0442\u043e\u0440 \u043f\u043e\u0441\u0442\u0430:"),o.Kb(),o.Jb(15,"input",8),o.jc(16,J,2,1,"div",4),o.Kb(),o.Lb(17,"button",9),o.lc(18," \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442 "),o.Kb(),o.Kb()),2&t){let t=null,e=null,l=null,r=null;o.ac("formGroup",n.form),o.yb(3),o.ac("ngClass",o.cc(6,E,(null==(t=n.form.get("title"))?null:t.touched)&&(null==(t=n.form.get("title"))?null:t.invalid))),o.yb(4),o.ac("ngIf",(null==(e=n.form.get("title"))?null:e.touched)&&(null==(e=n.form.get("title"))?null:e.invalid)),o.yb(5),o.ac("ngClass",o.cc(8,E,(null==(l=n.form.get("author"))?null:l.touched)&&(null==(l=n.form.get("author"))?null:l.invalid))),o.yb(4),o.ac("ngIf",(null==(r=n.form.get("author"))?null:r.touched)&&(null==(r=n.form.get("author"))?null:r.invalid)),o.yb(1),o.ac("disabled",n.form.invalid)}},directives:[i.n,i.j,i.e,l.j,i.a,i.i,i.c,l.l,U.a],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})(),$=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["app-edit-page"]],decls:2,vars:0,template:function(t,n){1&t&&(o.Lb(0,"p"),o.lc(1,"edit-page works!"),o.Kb())},encapsulation:2}),t})();var F=e("PCNd");let G=(()=>{class t{constructor(t,n){this.auth=t,this.router=n}canActivate(t,n){if(this.auth.isAuthenticated())return!0;this.auth.logout(),this.router.navigate(["/admin","login"],{queryParams:{loginAgain:!0}})}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(a.a),o.Pb(r.c))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(n){return new(n||t)},providers:[G],imports:[[l.c,i.f,i.l,F.a,r.g.forChild([{path:"",component:K,children:[{path:"",redirectTo:"/admin/login",pathMatch:"full"},{path:"login",component:g},{path:"dashboard",component:q,canActivate:[G]},{path:"create",component:N,canActivate:[G]},{path:"post/:id/edit",component:$,canActivate:[G]}]}])],r.g]}),t})()}}]);